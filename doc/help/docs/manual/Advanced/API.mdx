# API Reference

## Overview

PRSM provides an API (Application Programming Interface) for other programs so that they can read and modify maps.
This is done by accessing specific web addresses (called 'endpoints') with parameters that state what operation is to be carried out.

## Base URL

All the endpoints are based on the following web address - see below for the actual endpoints.

```url
https://prsm.uk/api/map
```

## Authentication

All API accesses have to be accompanied by the room name of the map to be accessed or modified. For example, to get a list of the factors and links in a map with the room name `ABC-DEF-GHI-JKL`, one would use the web address:

```url
https://prsm.uk/api/map/ABC-DEF-GHI-JKL
```

Typically, however, this web address would be accessed from the code inside a program.  This program can be written in any suitable language, for example, JavaScript or PHP.  For example, this snippet in JavaScript  returns data about the map as a JSON string in the data variable:

```javascript
const response = await fetch(`https://prsm.uk/api/map/ABC-DEF-GHI-JKL`, {
      method: 'GET',
      headers: {
        'Content-Type': 'application/json',
      }
      })
if (!response.ok) {
      const errorData = await response.json()
      throw new Error(`HTTP ${response.status}: ${errorData.error || 'Unknown error'}`)
    }
const data = await response.json()
```

or equivalently in PHP

```PHP
<?php
$url = "https://prsm.uk/api/map/ABC-DEF-GHI-JKL";
// Initialize cURL session
$ch = curl_init($url);
// Set cURL options
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HTTPHEADER, [
    'Content-Type: application/json',
]);
// Execute request
$response = curl_exec($ch);
$httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
// Handle errors
if ($response === false) {
    throw new Exception('cURL error: ' . curl_error($ch));
}
curl_close($ch);
// Decode JSON response
$data = json_decode($response, true);
if ($httpCode < 200 || $httpCode >= 300) {
    $errorMsg = isset($data['error']) ? $data['error'] : 'Unknown error';
    throw new Exception("HTTP {$httpCode}: {$errorMsg}");
}
// Use $data as needed
?>
```

## Endpoints

### GET /resource

**Description:** Retrieve resources.

**Parameters:**

| Name  | Type   | Required | Description               |
|-------|--------|----------|---------------------------|
| id    | string | yes      | Resource identifier       |
| limit | number | no       | Max results (default: 10) |

**Response:**

```json
{
    "id": "string",
    "name": "string",
    "created": "ISO 8601 timestamp"
}
```

**Status Codes:**

- `200` - Success
- `404` - Not found
- `500` - Server error

### POST /resource

**Description:** Create a new resource.

**Request Body:**

```json
{
    "name": "string"
}
```

**Response:** Same as GET (201 Created)

## Error Handling

Describe common error responses and their meanings.

## Rate Limiting

Include throttling or quota information if applicable.

## Examples

Include curl or JavaScript examples for common use cases.
